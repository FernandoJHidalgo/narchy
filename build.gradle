plugins {
    id 'java'
    //id "pl.squirrel.classycle" version "1.1"
    //id "com.github.nullstress.dependency-analysis" version "1.0.3"
    id "com.github.nwillc.vplugin" version "1.2.5"
    //id "com.github.tkruse.groovysh" version "1.0.8"  //https://github.com/tkruse/gradle-groovysh-plugin

}




allprojects {
    //apply plugin: 'maven'
    apply plugin: 'build-dashboard'
    apply plugin: 'application'
    apply plugin: 'jdepend'
    apply plugin: 'project-report'
    apply plugin: "jacoco"


    group = 'opennars'
    version = '1.7-SNAPSHOT'


}


subprojects {
    apply plugin: 'java'
    sourceCompatibility = 1.8
    targetCompatibility = 1.8


     repositories {
        mavenLocal()

        maven { url "https://jitpack.io" }
        maven { url "http://repo.maven.apache.org/maven2" }
        //maven { url "http://maven.cs.lth.se/content/repositories/public/" }
        maven { url "https://oss.sonatype.org/content/repositories/snapshots" }
    }

    test {
        reports.html.enabled = false
        ignoreFailures = true
    }

    processResources {
        from ('src/main/java') {
            include '**/*.nal'
            include '**/*.prolog'
        }
    }
}


task testReport(type: TestReport) {
    destinationDir = file("$buildDir/reports/allTests")
    // Include the results from the `test` task in all subprojects
    reportOn subprojects*.test
}


jacocoTestReport {
    reports {
        xml.enabled false
        csv.enabled false
        html.destination "${buildDir}/coverage_html"
    }
}

compileJava {
    //https://docs.gradle.org/current/dsl/org.gradle.api.tasks.compile.JavaCompile.html

    //enable compilation in a separate daemon process
    options.fork = false

    //enable incremental compilation
    options.incremental = true
}
