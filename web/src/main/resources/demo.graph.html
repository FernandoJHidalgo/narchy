<html>
<head>
    <title>?</title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <link rel="import" href="init.html">




</head>

<body>
    <!--<div id="sidebar" class="ui inverted menu"></div>-->
    <div id="view"></div>

</body>

<!--<script src="index.js" onload="ready()" ></script>-->

<script>
    $(document).ready(function() {

        var s = spacegraph($('#view'), {
            //options
            edgehandles: {
                preview: true, // whether to show added edges preview before releasing selection
                handleSize: 3, // the size of the edge handle put on nodes
                handleColor: "rgba(255, 0, 0, 0.5)", // the colour of the handle and the line drawn from it
                handleLineType: 'ghost', // can be 'ghost' for real edge, 'straight' for a straight line, or 'draw' for a draw-as-you-go line
                handleLineWidth: 1, // width of handle line in pixels
                handleNodes: 'node', // selector/filter function for whether edges can be made from a given node
                hoverDelay: 75, // time spend over a target node before it is considered a target selection
                cxt: true, // whether cxt events trigger edgehandles (useful on touch)
                enabled: true, // whether to start the plugin in the enabled state
                toggleOffOnLeave: true, // whether an edge is cancelled by leaving a node (true), or whether you need to go over again to cancel (false; allows multiple edges in one pass)
                edgeType: function (sourceNode, targetNode) {
                    // can return 'flat' for flat edges between nodes or 'node' for intermediate node between them
                    // returning null/undefined means an edge can't be added between the two nodes
                    return 'flat';
                },
                loopAllowed: function (node) {
                    // for the specified node, return whether edges from itself to itself are allowed
                    return false;
                },
                nodeLoopOffset: -50, // offset for edgeType: 'node' loops
                nodeParams: function (sourceNode, targetNode) {
                    // for edges between the specified source and target
                    // return element object to be passed to cy.add() for intermediary node
                    return {};
                },
                edgeParams: function (sourceNode, targetNode, i) {
                    // for edges between the specified source and target
                    // return element object to be passed to cy.add() for edge
                    // NB: i indicates edge index in case of edgeType: 'node'
                    return {};
                },
                /*
                 start: function (sourceNode) {
                 // fired when edgehandles interaction starts (drag on handle)
                 },
                 complete: function (sourceNode, targetNodes, addedEntities) {
                 // fired when edgehandles is done and entities are added
                 },
                 stop: function (sourceNode) {
                 // fired when edgehandles interaction is stopped (either complete with added edges or incomplete)
                 }
                 */
            }
        });

        s.addNode({

            width: 32,
            height: 32,
            shape: 'hexagon',

            widget: {
                html: '<div style="width: 100%;"><div contenteditable="true" class="editable">...</div><br/></div>',
                //style: {},
                scale: 0.9,
                minPixels: 8,
                pixelScale: 100
            }
        });

        s.addNode({
            width: 128,
            height: 128,
            widget: {
                html: '<iframe width="100%" height="100%" src="/terminal.html"></iframe>',
                style: {},
                scale: 0.8,
                minPixels: 8,
                pixelScale: 300
            }
        });
        s.addNode({
            width: 128,
            height: 128,
            shape: 'hexagon',
            widget: {
                html: '<iframe width="100%" height="100%" src="/index.html"></iframe>',
                style: {},
                scale: 0.8,
                minPixels: 8,
                pixelScale: 400
            }
        });

        s.addChannel(new Channel({
            id: 'untitled_' + parseInt(Math.random() * 100),
            style: {
                'node': {
                    'content': 'data(content)',
                    'text-valign': 'center',
                    'text-halign': 'center',
                    'shape': 'rectangle'
                },
                '$node > node': {
                    'padding-top': '2px',
                    'padding-left': '2px',
                    'padding-bottom': '2px',
                    'padding-right': '2px',
                    'text-valign': 'top',
                    'text-halign': 'center'
                },
                'edge': {
                    'target-arrow-shape': 'triangle',
                    //'line-style': 'dashed',
                    'line-width': '16'
                },
                ':selected': {
                    //'background-color': 'black',
                    'line-color': 'black',
                    'target-arrow-color': 'black',
                    'source-arrow-color': 'black'
                }
            },
            nodes: [
                {id: 'b',
                    label: 'ABC',
                    style: {
                        shape: 'triangle',
                        height: 24,
                        width: 16
                    }
                },

                {id: 'p',
                    style: {
                        shape: 'rectangle',
                        height: 60,
                        width: 30
                    }
                },

                /*{id: 'b1', parent: 'p',
                 style: { _content: 'x', shape: 'triangle', height: 4, width: 4 }
                 },*/
                /*{id: 'b2', parent: 'p',
                 style: { _content: 'y', shape: 'triangle', width: 8, height: 8 }
                 },
                 {id: 'b3', parent: 'p',
                 style: { _content: 'z', shape: 'triangle', width: 8, height: 8 }
                 },
                 */
                /*{
                 id: 'serial' + parseInt(Math.random()*100),
                 width: 16,
                 height: 16,

                 widget: {
                 html: "<div contenteditable='true' class='editable' style='overflow: auto; resizable: both'></div>",
                 scale: 0.8,
                 style: {width: '300px', height: '300px'},
                 },
                 },*/
                {id: 'd',
                    form: {
                        value: {
                            firstname: 'First',
                            surname: 'Last',
                            age: 0
                        },
                        style: {width: '300px', height: '260px'},
                        scale: 1
                    },
                    widget: {
                        html: '<x-metawidget id="metawidget1" path="person"></x-metawidget>',
                        style: {},
                        //html: '<iframe width="600px" height="600px" src="http://enenews.com"></iframe><br/><button>x</button>',
                        scale: 1,
                        pixelScale: 300.0,
                        minPixels: 2,
                    },
                    style: {
                        height: "24",
                        width: "24",
                        opacity: 0.75
                    }
                },

                {id: 'u',
                    width: 48, height: 32, url: 'http://wikipedia.org' },

                {id: 'e',
                    width: 64,
                    height: 64,
                    widget: {
                        html: '<div style="width: 100%; height: 100%; background-color: orange; border: 2px solid black;"><div contenteditable="true" class="editable">WTF</div><br/><button>OK</button></div>',
                        style: {  },
                        scale: 0.9,
                        minPixels: 8,
                    }
                },

                {id: 'e1',
                    width: 64,
                    height: 64,
                    widget: {
                        html: '<div style="background-color: green; border: 2px solid black;"><div contenteditable="true" class="editable">OR(AND(F,B),Z) => X</div><br/><button>OK</button></div>',
                        style: {},
                        scale: 0.9,
                        minPixels: 16,
                    }
                }


                //{id: 'f', parent: 'e'}
            ],
            edges: [
                {id: 'eb', source: 'e', target: 'b',
                    style: {
                        'line-color': 'blue',
                        'line-width': '44'
                    }
                }
                //{id: 'db', source: 'd', target: 'b'},
                //{id: 'b1b2', source: 'b1', target: 'b2'},
                //{id: 'b1b3', source: 'b1', target: 'b3'}
                //{id: 'eb', source: 'e', target: 'b'}
            ]
        }));

        s.layout({
            name: 'grid'
        });
    });




</script>



</html>
