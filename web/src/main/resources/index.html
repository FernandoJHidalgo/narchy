<html>
<head>

    <style type="text/css">
        @import url("terminal.css");
    </style>
    <style>
        body {

        }


        #active {
            position: fixed; width: 100%;
        }

        #active {
            height: 100%;
        }


        .NARConsole {
            width: 100% !important;
            height: 100% !important;
        }

        #nalInput {
            position: fixed; bottom: 0; left: 0; width: 100%;
            height: 30px; opacity: 0.8;
        }
        #nalInput .NALEditor {
            font-size: 30px;
        }

        .ui-dialog {
            opacity: 0.8 !important;
        }

    </style>

    <link rel="import" href="init.html">

    <title>NARchy</title>
</head>
<body>



    <div id="active" style="position: fixed; width: 100%; height: 100%"></div>

    <div class="taskbar"></div>

    <div class="demo">
        <div class="description">...</div>
    </div>

    <!--<div class="ui grid">-->

        <!--<div class="four wide column">-->
            <!--<div class="ui segment" style="opacity: 0.2">-->
                <!--<h1>Emotion</h1>-->
                <!--<div id="emotion"></div>-->
            <!--</div>-->
        <!--</div>-->

    <!--</div>-->

    <!--<div id="menu"></div>-->

    <div id="narOutput">
    </div>

    <div id="nalInput">
        <!--<div class="ui buttons">-->
            <!--<button class="ui labeled icon button active">-->
                <!--<i class="left chevron icon"></i>-->
                <!--Back-->
            <!--</button>-->
            <!--<button class="ui button">-->
                <!--<i class="stop icon"></i>-->
                <!--Stop-->
            <!--</button>-->
            <!--<button class="ui right labeled icon button">-->
                <!--Forward-->
                <!--<i class="right chevron icon"></i>-->
            <!--</button>-->
        <!--</div>-->
    </div>



</body>

<script src="narchy.js"></script>

<script>
    "use strict";


    $(document).ready(function() {

        var terminal = NARTerminal();

        // taskbar has to be created first
        var tasks = $( ".taskbar" );
        tasks.taskbar({
            windowsContainment: "viewport",
            horizontalStick: "top left",
            draggable: true,
            buttons: {
                log: {
                    label: "Log"
                }
            },

            buttonsOrder: [ "log" ]

        });

        /** creates a new taskbar-managed window */
        tasks.newWindow = function(title, contentBuilder, onClose, onResized) {
            return contentBuilder().window({
                taskbar: this,
                title: title,
                close: onClose,
                resizeStop: onResized
            });
        };

        tasks.taskbar( "option", "buttons.log" ).$element.on( "click", function () {

            var c = NARConsole(terminal);

            tasks.newWindow("Log",
                function() {
                    return c;
                },
                function (event) {
                    console.log('close');
                },
                function( event, ui ) {
                    c.editor.resize(true); //ace editor needs resized manually when its container has
                }
            );

        });

        $("#nalInput").append(NALEditor('', terminal));

        $("#active").append(SocketNARGraph("active"));

        //$("#emotion").append(SocketMetaWidget("emotion"));


    });

</script>
</html>